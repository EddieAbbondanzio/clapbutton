!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=3)}([function(t,e,s){var n=s(1);"string"==typeof n&&(n=[[t.i,n,""]]);var i={insert:"head",singleton:!1};s(2)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,s){"use strict";s.r(e),e.default=s.p+"styles.css"},function(t,e,s){"use strict";var n,i={},a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var t={};return function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}t[e]=s}return t[e]}}();function r(t,e){for(var s=[],n={},i=0;i<t.length;i++){var a=t[i],o=e.base?a[0]+e.base:a[0],r={css:a[1],media:a[2],sourceMap:a[3]};n[o]?n[o].parts.push(r):s.push(n[o]={id:o,parts:[r]})}return s}function c(t,e){for(var s=0;s<t.length;s++){var n=t[s],a=i[n.id],o=0;if(a){for(a.refs++;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(v(n.parts[o],e))}else{for(var r=[];o<n.parts.length;o++)r.push(v(n.parts[o],e));i[n.id]={id:n.id,refs:1,parts:r}}}}function l(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var n=s.nc;n&&(t.attributes.nonce=n)}if(Object.keys(t.attributes).forEach((function(s){e.setAttribute(s,t.attributes[s])})),"function"==typeof t.insert)t.insert(e);else{var i=o(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function h(t,e,s,n){var i=s?"":n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,i);else{var a=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function p(t,e,s){var n=s.css,i=s.media,a=s.sourceMap;if(i&&t.setAttribute("media",i),a&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var f=null,m=0;function v(t,e){var s,n,i;if(e.singleton){var a=m++;s=f||(f=l(e)),n=h.bind(null,s,a,!1),i=h.bind(null,s,a,!0)}else s=l(e),n=p.bind(null,s,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(s)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a());var s=r(t,e);return c(s,e),function(t){for(var n=[],a=0;a<s.length;a++){var o=s[a],l=i[o.id];l&&(l.refs--,n.push(l))}t&&c(r(t,e),e);for(var u=0;u<n.length;u++){var d=n[u];if(0===d.refs){for(var h=0;h<d.parts.length;h++)d.parts[h]();delete i[d.id]}}}}},function(t,e,s){"use strict";s.r(e);class n{constructor(t,e=0){this.url=t,this.claps=e,this.pendingClaps=0,this.postedClaps=0,this.wasClapped=!1}}async function i(t){await new Promise(e=>setTimeout(e,t))}class a{constructor(t){this._button=t,this._icon=t.children[0],this._clickId=0,this._confettiId=0;let e=!1,s=!1,n=null;t.addEventListener("mouseover",()=>this._notifyListeners("onHover")),t.addEventListener("mouseleave",()=>this._notifyListeners("onLeave")),t.addEventListener("mousedown",t=>{(t.target==this._button||t.target.parentNode==this._button&&t.target!=this._streakBubble)&&(e=!0,s=!1,clearTimeout(n),n=setTimeout(()=>{s=!0,this._notifyListeners("onHold")},250))}),window.addEventListener("mouseup",t=>{if(e){if(e=!1,s)return t.preventDefault(),void this._notifyListeners("onRelease");this._notifyListeners("onClick"),clearTimeout(n)}})}showPulse(){this._triggerAnimation(this._icon,"shadow-pulse")}hidePulse(){this._stopAnimation(this._icon,"shadow-pulse")}async showClickStreakCount(t){this.hidePulse(),this.hideCount();let e=null;null==this._streakBubble?(e=document.createElement("div"),e.className="streak-bubble",this._button.appendChild(e),this._streakBubble=e):e=this._streakBubble,e.innerHTML=`<span>+${t.pendingClaps+t.postedClaps}</span>`;let s=++this._clickId;1==t.pendingClaps?(this._triggerAnimation(e,"first-pop-up-and-fade"),await i(1e3),s==this._clickId&&(this._stopAnimation(e,"first-pop-up-and-fade"),this.showCount(t.claps))):(this._stopAnimation(e,"first-pop-up-and-fade"),this._triggerAnimation(e,"pop-up-and-fade"),await i(1e3),s==this._clickId&&(this._stopAnimation(e,"pop-up-and-fade"),this.showCount(t.claps))),s==this._clickId&&(this._button.removeChild(e),this._streakBubble=null)}async grow(){this._triggerAnimation(this._icon,"grow")}async shrink(){this._stopAnimation(this._icon,"grow")}async growAndShrink(){await this._temporaryAnimation(this._icon,"grow-and-shrink",200)}async showCount(t){let e=Math.abs(t)>999?Math.sign(t)*(Math.abs(t)/1e3).toFixed(1)+"k":Math.sign(t)*Math.abs(t);this._button.setAttribute("data-clap-count",e),this._button.title=`${t.toLocaleString()} claps`}async hideCount(){this._button.removeAttribute("data-clap-count")}markAsClapped(){this._button.classList.add("clap-button-clicked")}async fireConfetti(){const t=++this._confettiId,e=document.createElement("div");e.className="confetti",e.setAttribute("data-confetti-id",t),e.innerHTML="&nbsp;",this._button.appendChild(e),await i(1e3),Array.from(this._button.children).forEach(e=>{e.classList.contains("confetti")&&e.getAttribute("data-confetti-id")==t.toString()&&e.remove()})}_notifyListeners(t){null!=this[t]&&this[t]()}_triggerAnimation(t,e){t.classList.remove(e),t.offsetWidth,t.classList.add(e)}_stopAnimation(t,e){t.classList.remove(e)}async _temporaryAnimation(t,e,s){t.classList.remove(e),t.offsetWidth,t.classList.add(e),await i(s),t.classList.remove(e)}}class o{constructor(t){this.interval=t,this.isActive=!1}start(){this.isActive=!0,this._startCountDown()}stop(){this.isActive=!1}_startCountDown(){setTimeout(()=>{this.isActive&&(this.onAlarm(),this._startCountDown())},this.interval)}}class r{constructor(t,e,s){this._model=t,this._view=e,this._timer=new o(250),this._service=s,e.onHover=()=>{e.showPulse()},e.onLeave=()=>{e.hidePulse(),this._service.clap(this._model.url,this._model.pendingClaps),this._model.postedClaps+=this._model.pendingClaps,this._model.pendingClaps=0},e.onClick=async()=>{e.hidePulse(),this._model.pendingClaps<50&&(await e.growAndShrink(),this._clap())},e.onHold=async()=>{this._timer.start(),e.grow(),this._timer.onAlarm=async()=>{this._model.pendingClaps+this._model.postedClaps<50&&this._clap()}},e.onRelease=async()=>{this._timer.stop(),e.shrink()},s.getClaps(t.url).then(s=>{t.claps=s,e.showCount(t.claps)}).catch(t=>console.log(t))}async _clap(){this._model.claps++,this._model.pendingClaps++,this._view.markAsClapped(),this._view.fireConfetti(),await this._view.showClickStreakCount(this._model),this._model.wasClapped=!0}}class c{constructor(t){this.baseUrl=t}async get(t,e){return this._makeRequest("GET",`${this.baseUrl}${t}?${e.name}=${encodeURIComponent(e.value)}`)}async post(t,e){return this._makeRequest("POST",`${this.baseUrl}${t}`,e)}async _makeRequest(t,e,s=null){return new Promise((function(n,i){let a=new XMLHttpRequest;a.open(t,e),a.onload=function(){this.status>=200&&this.status<300?n(a.response):i({status:this.status,statusText:a.statusText})},a.onerror=function(){i({status:this.status,statusText:a.statusText})},null!=s?(a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(s))):a.send()}))}}class l{constructor(t,e=!1){this.http=new c(t),this.isDev=e}async getClaps(t){return this.isDev?0:await this.http.get("/clap",{name:"url",value:t})}async clap(t,e){this.isDev||await this.http.post("/clap",{url:t,claps:e})}}s(0);document.addEventListener("DOMContentLoaded",()=>{var t=document.getElementsByClassName("clap-button");for(let e of t){e.innerHTML='<svg class="clap-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 96 96" xml:space="preserve"><path d="M81,52.4c2.1-2.7,2-6.7-0.5-9.2c-0.8-0.8-1.9-1.4-3-1.7c0.4-0.9,0.6-1.9,0.6-2.9c0-1.9-0.7-3.6-2-4.9  c-2.5-2.5-6.3-2.7-9-0.7c-0.3-0.8-0.7-1.6-1.3-2.3c-1.3-1.4-3.1-2.3-5-2.3c-1.8-0.1-3.6,0.6-4.9,1.9c-0.2-0.3-0.4-0.7-0.7-0.9  c-1.3-1.4-3.1-2.3-5-2.3c-2-0.1-3.8,0.7-5.1,2L35.1,39c-1.1-4.2-5.1-7.1-9.5-6.6c-1.2,0.1-2.3,0.7-3.1,1.5c-1.8-2-4.6-3.2-7.5-2.9  c-2.7,0.3-4.8,2.6-4.8,5.4l0.1,14.5c0,3.8-0.5,7.7-1.4,11.1l0,0.1l0,0c-2,7,0,14.5,5.1,19.6c5.3,5.3,12.4,8.2,19.8,8.2  c0.6,0,1.3,0,1.9-0.1c2.8,0.9,5.8,1.4,8.7,1.4c7.2,0,14.4-2.7,19.8-8.2l19.3-19.4c1.3-1.3,2-3.1,2-4.9c0-1.9-0.7-3.6-2-4.9  C82.8,53.2,81.9,52.7,81,52.4z M48,32c0.6-0.6,1.4-0.8,2.1-0.8c0.8,0,1.5,0.4,2,0.9c0.3,0.4,0.5,0.9,0.5,1.4L36.1,50.4l-0.5-6.1  L48,32z M16.9,78.9c-4.1-4.1-5.6-10-4.1-15.5l0,0c1.1-4,1.6-8.2,1.6-12.4l-0.1-14.5c0-0.6,0.5-1.2,1.1-1.2c2.6-0.3,4.9,1.6,5.2,4.1  l0.2,2.4l0.1,10.5c0,3.8-0.5,7.6-1.3,11c0,0.1-0.1,0.1-0.1,0.2c-2,7,0,14.5,5.1,19.6c0.5,0.5,1.1,1,1.6,1.5  C22.7,83.4,19.5,81.5,16.9,78.9z M80.6,60.8L61.3,80.2c-9.3,9.3-24.5,9.3-33.8,0c-4-4-5.6-9.9-4.1-15.4c0,0,0-0.1,0-0.1  c1.1-4.1,1.6-8.2,1.6-12.4l0,0c0,0,0,0,0,0L25,41.8l0,0l0-0.3l0-3.7c0-0.6,0.5-1.2,1.1-1.2c2.6-0.3,4.9,1.6,5.2,4.1L32,50.8  c0.2,1.5,1.2,2.8,2.6,3.3c1.5,0.5,3,0.1,4.1-0.9l19.8-19.8c0.6-0.6,1.1-0.9,2.1-0.8c0.8,0,1.5,0.4,2,0.9c0.9,1,0.8,3-0.3,4.1l0,0  c0,0,0,0,0,0L47.6,52.4c-0.8,0.8-0.8,2.1,0,2.9c0.4,0.4,0.9,0.6,1.5,0.6c0.5,0,1.1-0.2,1.5-0.6l14.8-14.8c0,0,0,0,0,0l3.9-3.9  c1.1-1.1,2.9-1.1,4,0c0.5,0.5,0.8,1.2,0.8,2c0,0.8-0.3,1.5-0.8,2L54.5,59.3c-0.8,0.8-0.8,2.1,0,2.9c0.4,0.4,0.9,0.6,1.5,0.6  s1.1-0.2,1.5-0.6l10.5-10.5l5.6-5.6c1.1-1.1,2.9-1.1,4,0c1.1,1.1,1.1,2.9,0,4l-3.8,3.8c0,0,0,0,0,0L71,56.6l-9.6,9.6  c-0.8,0.8-0.8,2.1,0,2.9c0.4,0.4,0.9,0.6,1.5,0.6s1.1-0.2,1.5-0.6l12.3-12.3c1.1-1.1,2.9-1.1,4,0c0.5,0.5,0.8,1.2,0.8,2  C81.5,59.6,81.2,60.3,80.6,60.8z M67.7,18.2l5.1-10.9c0.5-1,1.7-1.5,2.7-1c1,0.5,1.5,1.7,1,2.7L71.5,20c-0.4,0.8-1.1,1.2-1.9,1.2  c-0.3,0-0.6-0.1-0.9-0.2C67.7,20.5,67.3,19.2,67.7,18.2z M57,7.1c-0.3-1.1,0.4-2.2,1.5-2.5C59.6,4.3,60.7,4.9,61,6l3.1,11.6  c0.3,1.1-0.4,2.2-1.5,2.5c-0.2,0-0.4,0.1-0.5,0.1c-0.9,0-1.7-0.6-2-1.5L57,7.1z M86.9,21.1L76,26.2c-0.3,0.1-0.6,0.2-0.9,0.2  c-0.8,0-1.5-0.4-1.9-1.2c-0.5-1,0-2.3,1-2.7l10.9-5.1c1-0.5,2.3,0,2.7,1C88.4,19.4,87.9,20.6,86.9,21.1z"></path></svg>';let t=e.getAttribute("data-color"),s=e.getAttribute("data-url"),i=e.getAttribute("data-backend-url"),o=null!=e.getAttribute("data-dev");if(null==s&&(s=window.location.href),null==t&&(t="green"),null==i&&(i="https://api.clapbutton.com"),!["red","green","blue","grey","white"].includes(t))throw new Error(`Invalid color: ${t}`);e.classList.add(`clap-button-${t}`);const c=new n(s,27),u=new a(e),d=new l(i,o);new r(c,u,d)}})}]);